version: '3.1'
services:
  mongo:
    image: mongo
    ports:
      - "27018:27017"

  # NOTE: Need to change the .env in the root folder of src/node-accident-statistics to use mongo url through docker
  node_accident_api:
    image: src/node-accident-statistics
    depends_on:
      - mongo
    ports:
    -  "9000:9000"

  ng_accident_statistics:
    image: src/ngAccidentStatistics
    ports: 
      - "4200:80"
    depends_on:
      - node_accident_api

  # TODO: Add the REACT client here and reduce the size

  mongo_express:
    image: mongo-express
    ports:
      - "8081:8081"
    environment:
      ME_CONFIG_MONGODB_SERVER: mongo
    depends_on:
      - mongo